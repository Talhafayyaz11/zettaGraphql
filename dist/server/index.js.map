{"mappings":"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","sources":["server/index.ts","server/resolvers.ts","server/implementation.ts","server/utils.ts","server/constants.ts","node_modules/@parcel/transformer-js/src/esmodule-helpers.js"],"sourcesContent":["import { ApolloServer } from 'apollo-server';\nimport { join } from 'path'\nimport { readFileSync } from 'fs'\nimport * as resolvers from './resolvers';\n\n// Load schema from the file\nconst typeDefs = readFileSync(join(__dirname, './schema.graphql')).toString('utf-8')\n\nconst server = new ApolloServer({\n  mocks: false,\n  mockEntireSchema: false,\n  resolvers,\n  typeDefs,\n});\n\nserver.listen().then(({ url }) => {\n  console.log(`ðŸš€ Server ready at ${url}`);\n});\n","import { records } from \"./implementation\";\nexport const Query = {\n  records,\n};\n","import { getName, getEmoticons, getLinks } from \"./utils\";\n\nconst records = async (_, { message = \"\" }: { message: string }) => {\n  const mentions = getName(message);\n  const emoticons = getEmoticons(message);\n  const links = await getLinks(message);\n\n  return {\n    mentions,\n    emoticons,\n    links,\n  };\n};\n\nexport { records };\n","import { nameRegex, emoticonRegex, urlRegex } from \"./constants\";\nimport getTitle from \"url-metadata\";\n\nexport const getName = (str: string) => {\n  try {\n    const parsed = str\n      .match(nameRegex)\n      ?.map((mention) => mention.replace(\"@\", \"\"));\n    return parsed;\n  } catch (err) {\n     console.error(\"Error occured in getName\",err)\n    return [];\n  }\n};\n\nexport const getEmoticons = (str: string) => {\n  try {\n    const parsed = str.match(emoticonRegex)?.map((x) => x.replace(/[()]/g, \"\"));\n    return parsed;\n  } catch (err) {\n      console.error(\"Error occured in getEmoticons\",err)\n    return [];\n  }\n};\n\nexport const getLinks = async (str: string) => {\n  try {\n    const urls = str.match(urlRegex)?.map(async (url) => {\n      const {title = ''} = await getTitle(url) || {};\n      console.log()\n      return { url, title };\n    }) || [];\n    const links = await Promise.all(urls as any);\n    return links;\n  } catch (err) {\n     console.error(\"Error occured in getLinks\",err)\n    return [];\n  }\n};\n","\n\nexport const nameRegex = /\\B@\\w+/g\nexport const emoticonRegex = /\\(.*?\\)/g\nexport const urlRegex = /(https?:\\/\\/[^\\s]+)/g","exports.interopDefault = function (a) {\n  return a && a.__esModule ? a : {default: a};\n};\n\nexports.defineInteropFlag = function (a) {\n  Object.defineProperty(a, '__esModule', {value: true});\n};\n\nexports.exportAll = function (source, dest) {\n  Object.keys(source).forEach(function (key) {\n    if (key === 'default' || key === '__esModule' || dest.hasOwnProperty(key)) {\n      return;\n    }\n\n    Object.defineProperty(dest, key, {\n      enumerable: true,\n      get: function () {\n        return source[key];\n      },\n    });\n  });\n\n  return dest;\n};\n\nexports.export = function (dest, destName, get) {\n  Object.defineProperty(dest, destName, {\n    enumerable: true,\n    get: get,\n  });\n};\n"],"names":[],"version":3,"file":"index.js.map","sourceRoot":"../../"}